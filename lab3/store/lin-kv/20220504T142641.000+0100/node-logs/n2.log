DEBUG:root:received {"dest":"n2","body":{"type":"init","node_id":"n2","node_ids":["n1","n2","n3","n4","n5"],"msg_id":1},"src":"c0","id":0}
INFO:root:node n2 initialized
DEBUG:root:sending {"dest": "c0", "src": "n2", "body": {"msg_id": 1, "in_reply_to": 1, "type": "init_ok"}}
INFO:root:node
n1
current time
1651670801752173406
node_time
1651670801752167138
dif
6268
True

INFO:root:LEADER IS DEAD bit of a aldrabation tho
n1

INFO:root:lead is dead

INFO:root:starting new elections, new term
1

INFO:root:Requesting new Vote

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 2, "type": "RequestVote", "term": 1, "prevLogIndex": 0, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 3, "type": "RequestVote", "term": 1, "prevLogIndex": 0, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 4, "type": "RequestVote", "term": 1, "prevLogIndex": 0, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 5, "type": "RequestVote", "term": 1, "prevLogIndex": 0, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 6, "type": "RequestVote", "term": 1, "prevLogIndex": 0, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":3,"type":"RequestVote","term":1,"prevLogIndex":0,"lastLogTerm":0,"candidateId":"n2"},"id":10}
INFO:root:voting for myself
n2
at time
1651670801756687945
nr votes
1

DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 7, "in_reply_to": 3, "type": "RequestVoteRes", "term": 1, "res": true}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":2,"in_reply_to":5,"type":"RequestVoteRes","term":1,"res":true},"id":14}
INFO:root:Got a response to the vote Request #475

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":2,"in_reply_to":6,"type":"RequestVoteRes","term":1,"res":true},"id":15}
INFO:root:node id:
n2
leader
n1
kvsotr
{}
cur term
1
log 
[(('pass', None), 0)]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n2
timeout dict
{'n1': 1651670801752167138, 'n2': 1651670801756683697, 'n3': 1651670801752167138, 'n4': 1651670801758537379, 'n5': 1651670801752167138}

DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":7,"in_reply_to":3,"type":"RequestVoteRes","term":1,"res":true},"id":16}
INFO:root:resposta
True
majority
3

INFO:root:antes  #487
1

INFO:root:depois  #489
2

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n1
kvsotr
{}
cur term
1
log 
[(('pass', None), 0)]
commit indez e last applied
0
0
candidate, votes, voted for
True
2
n2
timeout dict
{'n1': 1651670801752167138, 'n2': 1651670801756683697, 'n3': 1651670801752167138, 'n4': 1651670801758537379, 'n5': 1651670801759374384}

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
2

INFO:root:depois  #489
3

INFO:root:became leader
log
[(('pass', None), 0)]
match index
{'n1': 0, 'n2': 0, 'n3': 0, 'n4': 0, 'n5': 0}

INFO:root:vote ended, new leader is
n2

INFO:root:sending HB

INFO:root:HBdest
n1
nextIndex
{'n1': 1, 'n2': 1, 'n3': 1, 'n4': 1, 'n5': 1}
log
[(('pass', None), 0)]

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 8, "type": "AppendEntries", "term": 1, "prevIndex": 0, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n3
nextIndex
{'n1': 1, 'n2': 1, 'n3': 1, 'n4': 1, 'n5': 1}
log
[(('pass', None), 0)]

DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 9, "type": "AppendEntries", "term": 1, "prevIndex": 0, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n4
nextIndex
{'n1': 1, 'n2': 1, 'n3': 1, 'n4': 1, 'n5': 1}
log
[(('pass', None), 0)]

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 10, "type": "AppendEntries", "term": 1, "prevIndex": 0, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n5
nextIndex
{'n1': 1, 'n2': 1, 'n3': 1, 'n4': 1, 'n5': 1}
log
[(('pass', None), 0)]

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 11, "type": "AppendEntries", "term": 1, "prevIndex": 0, "prevTerm": 0, "entries": [], "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":3,"in_reply_to":10,"type":"AppendEntriesRes","res":true,"term":1,"next":1,"commit":0},"id":21}
DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":3,"in_reply_to":11,"type":"AppendEntriesRes","res":true,"term":1,"next":1,"commit":0},"id":22}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
1
log 
[(('pass', None), 0)]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651670801752167138, 'n2': 1651670801765038583, 'n3': 1651670801752167138, 'n4': 1651670801758537379, 'n5': 1651670801759374384}

INFO:root:resposta
True
majority
3

DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":2,"in_reply_to":4,"type":"RequestVoteRes","term":1,"res":true},"id":23}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
1
log 
[(('pass', None), 0)]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651670801752167138, 'n2': 1651670801765038583, 'n3': 1651670801765650846, 'n4': 1651670801765422503, 'n5': 1651670801765445573}

INFO:root:resposta
True
majority
3

DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":3,"in_reply_to":9,"type":"AppendEntriesRes","res":true,"term":1,"next":1,"commit":0},"id":24}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":2,"type":"AppendEntries","term":0,"prevIndex":0,"prevTerm":0,"entries":[],"commit":0},"id":26}
DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 12, "in_reply_to": 2, "type": "AppendEntriesRes", "res": false, "term": 1}}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":6,"in_reply_to":2,"type":"RequestVoteRes","term":1,"res":true},"id":32}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":7,"in_reply_to":8,"type":"AppendEntriesRes","res":true,"term":1,"next":1,"commit":0},"id":33}
INFO:root:msg term
0
current term
1
log
[(('pass', None), 0)]
msg entries
[]

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
1
log 
[(('pass', None), 0)]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651670801788681472, 'n2': 1651670801765038583, 'n3': 1651670801768015641, 'n4': 1651670801765422503, 'n5': 1651670801765445573}

INFO:root:resposta
True
majority
3

DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":11,"type":"AppendEntries","term":1,"prevIndex":-1,"prevTerm":0,"entries":[[["pass",null],0]],"commit":0},"id":40}
INFO:root:commiting command
[['pass', None], 0]

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 13, "in_reply_to": 11, "type": "AppendEntriesRes", "res": true, "term": 1, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":7,"type":"RequestVote","term":2,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n5"},"id":49}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 14, "in_reply_to": 7, "type": "RequestVoteRes", "term": 2, "res": true}}
INFO:root:election started and voted vor
n5
at time
1651670801860510312

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":13,"type":"AppendEntries","term":2,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":59}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":8,"type":"RequestVote","term":2,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n4"},"id":62}
DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 15, "in_reply_to": 13, "type": "AppendEntriesRes", "res": true, "term": 2, "next": 2, "commit": 0}}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 16, "in_reply_to": 8, "type": "RequestVoteRes", "term": 2, "res": false}}
DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":12,"type":"RequestVote","term":3,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n3"},"id":76}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 17, "in_reply_to": 12, "type": "RequestVoteRes", "term": 2, "res": false}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":15,"type":"AppendEntries","term":2,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":85}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 18, "in_reply_to": 15, "type": "AppendEntriesRes", "res": true, "term": 2, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":19,"type":"AppendEntries","term":3,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":94}
INFO:root:vote ended, new leader is
n2

INFO:root:there is a new leader

INFO:root:node id:
n2
leader
n3
kvsotr
{}
cur term
2
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651670801791493857, 'n2': 1651670801765038583, 'n3': 1651670801875611362, 'n4': 1651670801871441463, 'n5': 1651670801865465906}

DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 19, "in_reply_to": 19, "type": "AppendEntriesRes", "res": true, "term": 3, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":16,"type":"RequestVote","term":2,"prevLogIndex":0,"lastLogTerm":0,"candidateId":"n1"},"id":102}
DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 20, "in_reply_to": 16, "type": "RequestVoteRes", "term": 3, "res": false}}
INFO:root:Bad election request, term is not up to date
None
at time
1651670801889151985

INFO:root:election ended

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":23,"type":"RequestVote","term":4,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n4"},"id":112}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 21, "in_reply_to": 23, "type": "RequestVoteRes", "term": 4, "res": true}}
INFO:root:election started and voted vor
n4
at time
1651670801975813944

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":29,"type":"AppendEntries","term":4,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":122}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 22, "in_reply_to": 29, "type": "AppendEntriesRes", "res": true, "term": 4, "next": 2, "commit": 0}}
INFO:root:election timeout, starting new election

INFO:root:starting new elections, new term
5

INFO:root:Requesting new Vote

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 23, "type": "RequestVote", "term": 5, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 24, "type": "RequestVote", "term": 5, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 25, "type": "RequestVote", "term": 5, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 26, "type": "RequestVote", "term": 5, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 27, "type": "RequestVote", "term": 5, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":24,"type":"RequestVote","term":5,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n2"},"id":129}
INFO:root:voting for myself
n2
at time
1651670802012979071
nr votes
1

DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 28, "in_reply_to": 24, "type": "RequestVoteRes", "term": 5, "res": true}}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":22,"in_reply_to":23,"type":"RequestVoteRes","term":2,"res":false},"id":132}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n3
kvsotr
{}
cur term
5
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n2
timeout dict
{'n1': 1651670802013667401, 'n2': 1651670802012976148, 'n3': 1651670801875611362, 'n4': 1651670801978318133, 'n5': 1651670801865465906}

DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":28,"in_reply_to":24,"type":"RequestVoteRes","term":5,"res":true},"id":134}
INFO:root:resposta
False
majority
3

DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":26,"in_reply_to":25,"type":"RequestVoteRes","term":4,"res":false},"id":135}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n3
kvsotr
{}
cur term
5
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n2
timeout dict
{'n1': 1651670802013667401, 'n2': 1651670802014023717, 'n3': 1651670801875611362, 'n4': 1651670801978318133, 'n5': 1651670801865465906}

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
1

INFO:root:depois  #489
2

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n3
kvsotr
{}
cur term
5
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
2
n2
timeout dict
{'n1': 1651670802013667401, 'n2': 1651670802014023717, 'n3': 1651670802014440488, 'n4': 1651670801978318133, 'n5': 1651670801865465906}

INFO:root:resposta
False
majority
3

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":23,"in_reply_to":27,"type":"RequestVoteRes","term":4,"res":false},"id":136}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":32,"in_reply_to":26,"type":"RequestVoteRes","term":5,"res":true},"id":137}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n3
kvsotr
{}
cur term
5
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
2
n2
timeout dict
{'n1': 1651670802013667401, 'n2': 1651670802014023717, 'n3': 1651670802014440488, 'n4': 1651670801978318133, 'n5': 1651670802014846197}

INFO:root:resposta
False
majority
3

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n3
kvsotr
{}
cur term
5
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
2
n2
timeout dict
{'n1': 1651670802013667401, 'n2': 1651670802014023717, 'n3': 1651670802014440488, 'n4': 1651670802015070495, 'n5': 1651670802014846197}

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
2

INFO:root:depois  #489
3

INFO:root:became leader
log
[(('pass', None), 0), [['pass', None], 0]]
match index
{'n1': 0, 'n2': 0, 'n3': 0, 'n4': 0, 'n5': 0}

INFO:root:vote ended, new leader is
n2

INFO:root:sending HB

INFO:root:HBdest
n1
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 29, "type": "AppendEntries", "term": 5, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n3
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 30, "type": "AppendEntries", "term": 5, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n4
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 31, "type": "AppendEntries", "term": 5, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n5
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 32, "type": "AppendEntries", "term": 5, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":33,"in_reply_to":31,"type":"AppendEntriesRes","res":true,"term":5,"next":2,"commit":0},"id":143}
DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":27,"in_reply_to":30,"type":"AppendEntriesRes","res":true,"term":5,"next":3,"commit":0},"id":142}
DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":24,"in_reply_to":32,"type":"AppendEntriesRes","res":true,"term":5,"next":2,"commit":0},"id":144}
INFO:root:leader alive, resuming timeout checker

INFO:root:election ended

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":35,"type":"RequestVote","term":6,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n4"},"id":148}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 33, "in_reply_to": 35, "type": "RequestVoteRes", "term": 6, "res": true}}
INFO:root:election started and voted vor
n4
at time
1651670802097257322

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":41,"type":"AppendEntries","term":6,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":158}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 34, "in_reply_to": 41, "type": "AppendEntriesRes", "res": true, "term": 6, "next": 2, "commit": 0}}
INFO:root:leader alive, resuming timeout checker

INFO:root:election timeout, starting new election

INFO:root:starting new elections, new term
7

INFO:root:Requesting new Vote

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 35, "type": "RequestVote", "term": 7, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 36, "type": "RequestVote", "term": 7, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 37, "type": "RequestVote", "term": 7, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 38, "type": "RequestVote", "term": 7, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 39, "type": "RequestVote", "term": 7, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":36,"type":"RequestVote","term":7,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n2"},"id":165}
INFO:root:voting for myself
n2
at time
1651670802199862433
nr votes
1

DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 40, "in_reply_to": 36, "type": "RequestVoteRes", "term": 7, "res": true}}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":24,"in_reply_to":35,"type":"RequestVoteRes","term":2,"res":false},"id":169}
DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":40,"in_reply_to":36,"type":"RequestVoteRes","term":7,"res":true},"id":170}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
7
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n2
timeout dict
{'n1': 1651670802200510658, 'n2': 1651670802199859030, 'n3': 1651670802017513832, 'n4': 1651670802107041708, 'n5': 1651670802017526818}

INFO:root:resposta
False
majority
3

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
7
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n2
timeout dict
{'n1': 1651670802200510658, 'n2': 1651670802200700832, 'n3': 1651670802017513832, 'n4': 1651670802107041708, 'n5': 1651670802017526818}

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
1

INFO:root:depois  #489
2

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":29,"type":"RequestVote","term":7,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n5"},"id":172}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":44,"in_reply_to":38,"type":"RequestVoteRes","term":7,"res":true},"id":173}
DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":30,"in_reply_to":37,"type":"RequestVoteRes","term":6,"res":false},"id":176}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 41, "in_reply_to": 29, "type": "RequestVoteRes", "term": 7, "res": false}}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
7
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
2
n2
timeout dict
{'n1': 1651670802200510658, 'n2': 1651670802200700832, 'n3': 1651670802017513832, 'n4': 1651670802201562850, 'n5': 1651670802201250067}

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":33,"in_reply_to":39,"type":"RequestVoteRes","term":7,"res":true},"id":179}
INFO:root:resposta
True
majority
3

INFO:root:antes  #487
2

INFO:root:depois  #489
3

INFO:root:became leader
log
[(('pass', None), 0), [['pass', None], 0]]
match index
{'n1': 0, 'n2': 0, 'n3': 0, 'n4': 0, 'n5': 0}

INFO:root:vote ended, new leader is
n2

INFO:root:sending HB

INFO:root:HBdest
n1
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 42, "type": "AppendEntries", "term": 7, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n3
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 43, "type": "AppendEntries", "term": 7, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n4
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 44, "type": "AppendEntries", "term": 7, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n5
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 45, "type": "AppendEntries", "term": 7, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
7
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651670802200510658, 'n2': 1651670802200700832, 'n3': 1651670802202819044, 'n4': 1651670802201562850, 'n5': 1651670802201250067}

INFO:root:resposta
False
majority
3

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
7
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651670802200510658, 'n2': 1651670802200700832, 'n3': 1651670802202819044, 'n4': 1651670802201562850, 'n5': 1651670802203007375}

INFO:root:resposta
True
majority
3

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":46,"in_reply_to":44,"type":"AppendEntriesRes","res":true,"term":7,"next":2,"commit":0},"id":188}
DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":32,"in_reply_to":43,"type":"AppendEntriesRes","res":true,"term":7,"next":3,"commit":0},"id":190}
DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":35,"in_reply_to":45,"type":"AppendEntriesRes","res":true,"term":7,"next":2,"commit":0},"id":189}
DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":37,"type":"RequestVote","term":8,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n5"},"id":192}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 46, "in_reply_to": 37, "type": "RequestVoteRes", "term": 8, "res": true}}
INFO:root:election started and voted vor
n5
at time
1651670802245553668

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":43,"type":"AppendEntries","term":8,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":202}
DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 47, "in_reply_to": 43, "type": "AppendEntriesRes", "res": true, "term": 8, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":28,"type":"RequestVote","term":3,"prevLogIndex":0,"lastLogTerm":0,"candidateId":"n1"},"id":209}
DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 48, "in_reply_to": 28, "type": "RequestVoteRes", "term": 8, "res": false}}
INFO:root:Bad election request, term is not up to date
n5
at time
1651670802325986009

INFO:root:election timeout, starting new election

INFO:root:starting new elections, new term
9

INFO:root:Requesting new Vote

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 49, "type": "RequestVote", "term": 9, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 50, "type": "RequestVote", "term": 9, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 51, "type": "RequestVote", "term": 9, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 52, "type": "RequestVote", "term": 9, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 53, "type": "RequestVote", "term": 9, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":50,"type":"RequestVote","term":9,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n2"},"id":219}
INFO:root:voting for myself
n2
at time
1651670802349240134
nr votes
1

DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 54, "in_reply_to": 50, "type": "RequestVoteRes", "term": 9, "res": true}}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":33,"in_reply_to":49,"type":"RequestVoteRes","term":3,"res":false},"id":223}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
9
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n2
timeout dict
{'n1': 1651670802350663110, 'n2': 1651670802349229774, 'n3': 1651670802204399318, 'n4': 1651670802204229578, 'n5': 1651670802248240183}

DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":54,"in_reply_to":50,"type":"RequestVoteRes","term":9,"res":true},"id":224}
INFO:root:resposta
False
majority
3

DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":36,"in_reply_to":51,"type":"RequestVoteRes","term":8,"res":false},"id":225}
INFO:root:Got a response to the vote Request #475

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":50,"in_reply_to":52,"type":"RequestVoteRes","term":9,"res":true},"id":226}
INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
9
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n2
timeout dict
{'n1': 1651670802350663110, 'n2': 1651670802351965329, 'n3': 1651670802204399318, 'n4': 1651670802204229578, 'n5': 1651670802248240183}

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":47,"in_reply_to":53,"type":"RequestVoteRes","term":9,"res":true},"id":227}
INFO:root:resposta
True
majority
3

INFO:root:antes  #487
1

INFO:root:depois  #489
2

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
9
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
2
n2
timeout dict
{'n1': 1651670802350663110, 'n2': 1651670802351965329, 'n3': 1651670802353392758, 'n4': 1651670802204229578, 'n5': 1651670802248240183}

INFO:root:resposta
False
majority
3

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
9
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
2
n2
timeout dict
{'n1': 1651670802350663110, 'n2': 1651670802351965329, 'n3': 1651670802353392758, 'n4': 1651670802353700708, 'n5': 1651670802248240183}

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
2

INFO:root:depois  #489
3

INFO:root:became leader
log
[(('pass', None), 0), [['pass', None], 0]]
match index
{'n1': 0, 'n2': 0, 'n3': 0, 'n4': 0, 'n5': 0}

INFO:root:vote ended, new leader is
n2

INFO:root:sending HB

INFO:root:HBdest
n1
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 55, "type": "AppendEntries", "term": 9, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n3
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 56, "type": "AppendEntries", "term": 9, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n4
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 57, "type": "AppendEntries", "term": 9, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n5
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 58, "type": "AppendEntries", "term": 9, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
9
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651670802350663110, 'n2': 1651670802351965329, 'n3': 1651670802353392758, 'n4': 1651670802353700708, 'n5': 1651670802355715900}

INFO:root:resposta
True
majority
3

INFO:root:election ended

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":51,"in_reply_to":57,"type":"AppendEntriesRes","res":true,"term":9,"next":2,"commit":0},"id":232}
DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":37,"in_reply_to":56,"type":"AppendEntriesRes","res":true,"term":9,"next":3,"commit":0},"id":233}
DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":48,"in_reply_to":58,"type":"AppendEntriesRes","res":true,"term":9,"next":2,"commit":0},"id":234}
INFO:root:sending HB

INFO:root:HBdest
n1
nextIndex
{'n1': 2, 'n2': 2, 'n3': 3, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 59, "type": "AppendEntries", "term": 9, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n3
nextIndex
{'n1': 2, 'n2': 2, 'n3': 3, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

Exception in thread Thread-8:
Traceback (most recent call last):
  File "/usr/lib/python3.10/threading.py", line 1009, in _bootstrap_inner
    self.run()
  File "/usr/lib/python3.10/threading.py", line 1371, in run
    self.function(*self.args, **self.kwargs)
  File "/home/peter/Documents/tf/lab3/raft.py", line 135, in recursive_heartbeats
    heartbeat(dest)
  File "/home/peter/Documents/tf/lab3/raft.py", line 124, in heartbeat
    prevTerm=log[nextIndex[dest]-1][1]
IndexError: list index out of range
INFO:root:election ended

DEBUG:root:received {"dest":"n2","body":{"key":0,"type":"read","msg_id":1},"src":"c13","id":236}
DEBUG:root:sending {"dest": "c13", "src": "n2", "body": {"msg_id": 60, "in_reply_to": 1, "type": "error", "code": 20, "text": "Invalid Key"}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":53,"type":"RequestVote","term":10,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n4"},"id":239}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":50,"type":"RequestVote","term":10,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n5"},"id":245}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 61, "in_reply_to": 53, "type": "RequestVoteRes", "term": 10, "res": true}}
INFO:root:election started and voted vor
n4
at time
1651670802453672728

INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 62, "in_reply_to": 50, "type": "RequestVoteRes", "term": 10, "res": false}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":59,"type":"AppendEntries","term":10,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":256}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 63, "in_reply_to": 59, "type": "AppendEntriesRes", "res": true, "term": 10, "next": 2, "commit": 0}}
INFO:root:leader alive, resuming timeout checker

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":58,"type":"AppendEntries","term":10,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":266}
DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 64, "in_reply_to": 58, "type": "AppendEntriesRes", "res": true, "term": 10, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":65,"type":"AppendEntries","term":10,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":273}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 65, "in_reply_to": 65, "type": "AppendEntriesRes", "res": true, "term": 10, "next": 2, "commit": 0}}
INFO:root:sending HB

INFO:root:HBdest
n1
nextIndex
{'n1': 2, 'n2': 2, 'n3': 3, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 66, "type": "AppendEntries", "term": 10, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n3
nextIndex
{'n1': 2, 'n2': 2, 'n3': 3, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

Exception in thread Thread-14:
Traceback (most recent call last):
  File "/usr/lib/python3.10/threading.py", line 1009, in _bootstrap_inner
    self.run()
  File "/usr/lib/python3.10/threading.py", line 1371, in run
    self.function(*self.args, **self.kwargs)
  File "/home/peter/Documents/tf/lab3/raft.py", line 135, in recursive_heartbeats
    heartbeat(dest)
  File "/home/peter/Documents/tf/lab3/raft.py", line 124, in heartbeat
    prevTerm=log[nextIndex[dest]-1][1]
IndexError: list index out of range
INFO:root:leader alive, resuming timeout checker

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":67,"type":"RequestVote","term":11,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n4"},"id":277}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 67, "in_reply_to": 67, "type": "RequestVoteRes", "term": 11, "res": true}}
INFO:root:election started and voted vor
n4
at time
1651670802526759211

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":73,"type":"AppendEntries","term":11,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":287}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 68, "in_reply_to": 73, "type": "AppendEntriesRes", "res": true, "term": 11, "next": 2, "commit": 0}}
INFO:root:election timeout, starting new election

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":64,"type":"RequestVote","term":12,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n5"},"id":294}
INFO:root:starting new elections, new term
12

INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

INFO:root:Requesting new Vote

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 69, "in_reply_to": 64, "type": "RequestVoteRes", "term": 12, "res": false}}
DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 70, "type": "RequestVote", "term": 12, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 71, "type": "RequestVote", "term": 12, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 72, "type": "RequestVote", "term": 12, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 73, "type": "RequestVote", "term": 12, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 74, "type": "RequestVote", "term": 12, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n2"}}
DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":71,"type":"RequestVote","term":12,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n2"},"id":304}
INFO:root:voting for myself
n2
at time
1651670802557308252
nr votes
1

DEBUG:root:sending {"dest": "n2", "src": "n2", "body": {"msg_id": 75, "in_reply_to": 71, "type": "RequestVoteRes", "term": 12, "res": true}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":78,"type":"RequestVote","term":13,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n4"},"id":310}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":39,"type":"RequestVote","term":4,"prevLogIndex":0,"lastLogTerm":0,"candidateId":"n1"},"id":311}
DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":45,"in_reply_to":72,"type":"RequestVoteRes","term":11,"res":false},"id":315}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 76, "in_reply_to": 78, "type": "RequestVoteRes", "term": 12, "res": false}}
DEBUG:root:received {"dest":"n2","src":"n2","body":{"msg_id":75,"in_reply_to":71,"type":"RequestVoteRes","term":12,"res":true},"id":319}
DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 77, "in_reply_to": 39, "type": "RequestVoteRes", "term": 12, "res": false}}
INFO:root:Bad election request, term is not up to date
n2
at time
1651670802558402108

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
12
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n2
timeout dict
{'n1': 1651670802558220314, 'n2': 1651670802557304894, 'n3': 1651670802558489401, 'n4': 1651670802557939844, 'n5': 1651670802555623459}

INFO:root:resposta
False
majority
3

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
12
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n2
timeout dict
{'n1': 1651670802558220314, 'n2': 1651670802558675487, 'n3': 1651670802558489401, 'n4': 1651670802557939844, 'n5': 1651670802555623459}

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
1

INFO:root:depois  #489
2

DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":82,"in_reply_to":73,"type":"RequestVoteRes","term":13,"res":false},"id":322}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
12
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
2
n2
timeout dict
{'n1': 1651670802558220314, 'n2': 1651670802558675487, 'n3': 1651670802558489401, 'n4': 1651670802559168098, 'n5': 1651670802555623459}

INFO:root:resposta
False
majority
3

DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":70,"type":"AppendEntries","term":12,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":328}
DEBUG:root:received {"dest":"n2","src":"n1","body":{"msg_id":43,"in_reply_to":70,"type":"RequestVoteRes","term":12,"res":true},"id":329}
DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 78, "in_reply_to": 70, "type": "AppendEntriesRes", "res": true, "term": 12, "next": 2, "commit": 0}}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
12
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
2
n2
timeout dict
{'n1': 1651670802559870064, 'n2': 1651670802558675487, 'n3': 1651670802558489401, 'n4': 1651670802559168098, 'n5': 1651670802559731971}

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
2

INFO:root:depois  #489
3

INFO:root:became leader
log
[(('pass', None), 0), [['pass', None], 0]]
match index
{'n1': 0, 'n2': 0, 'n3': 0, 'n4': 0, 'n5': 0}

INFO:root:vote ended, new leader is
n2

INFO:root:sending HB

INFO:root:HBdest
n1
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n1", "src": "n2", "body": {"msg_id": 79, "type": "AppendEntries", "term": 12, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n3
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n3", "src": "n2", "body": {"msg_id": 80, "type": "AppendEntries", "term": 12, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n4
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 81, "type": "AppendEntries", "term": 12, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
INFO:root:HBdest
n5
nextIndex
{'n1': 2, 'n2': 2, 'n3': 2, 'n4': 2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]

DEBUG:root:sending {"dest": "n5", "src": "n2", "body": {"msg_id": 82, "type": "AppendEntries", "term": 12, "prevIndex": 1, "prevTerm": 0, "entries": [], "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":73,"in_reply_to":74,"type":"RequestVoteRes","term":12,"res":true},"id":335}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n2
leader
n2
kvsotr
{}
cur term
12
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651670802559870064, 'n2': 1651670802558675487, 'n3': 1651670802558489401, 'n4': 1651670802559168098, 'n5': 1651670802561132308}

INFO:root:resposta
True
majority
3

DEBUG:root:received {"dest":"n2","src":"n3","body":{"msg_id":49,"in_reply_to":80,"type":"AppendEntriesRes","res":true,"term":12,"next":3,"commit":0},"id":344}
DEBUG:root:received {"dest":"n2","src":"n5","body":{"msg_id":76,"in_reply_to":82,"type":"AppendEntriesRes","res":true,"term":12,"next":2,"commit":0},"id":345}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":86,"in_reply_to":81,"type":"AppendEntriesRes","res":false,"term":13},"id":346}
INFO:root:387##########:
node
n2
current term
12
next I
{'n1': 2, 'n2': 2, 'n3': 3, 'n4': 1, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]
dest
n4

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 83, "type": "AppendEntries", "term": 12, "prevIndex": 0, "prevTerm": 0, "entries": [[["pass", null], 0]], "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":88,"in_reply_to":83,"type":"AppendEntriesRes","res":false,"term":13},"id":350}
INFO:root:387##########:
node
n2
current term
12
next I
{'n1': 2, 'n2': 2, 'n3': 3, 'n4': 0, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]
dest
n4

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 84, "type": "AppendEntries", "term": 12, "prevIndex": -1, "prevTerm": 0, "entries": [[["pass", null], 0], [["pass", null], 0]], "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":90,"in_reply_to":84,"type":"AppendEntriesRes","res":false,"term":13},"id":354}
INFO:root:387##########:
node
n2
current term
12
next I
{'n1': 2, 'n2': 2, 'n3': 3, 'n4': -1, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]
dest
n4

DEBUG:root:sending {"dest": "n4", "src": "n2", "body": {"msg_id": 85, "type": "AppendEntries", "term": 12, "prevIndex": -2, "prevTerm": 0, "entries": [[["pass", null], 0]], "commit": 0}}
DEBUG:root:received {"dest":"n2","src":"n4","body":{"msg_id":92,"in_reply_to":85,"type":"AppendEntriesRes","res":false,"term":13},"id":358}
INFO:root:387##########:
node
n2
current term
12
next I
{'n1': 2, 'n2': 2, 'n3': 3, 'n4': -2, 'n5': 2}
log
[(('pass', None), 0), [['pass', None], 0]]
dest
n4

ERROR:root:fatal exception in handler
Traceback (most recent call last):
  File "/home/peter/Documents/tf/lab3/ms.py", line 27, in exitOnError
    fn(*args)
  File "/home/peter/Documents/tf/lab3/raft.py", line 406, in handle
    send(node_id, dest, type='AppendEntries', term=current_term, prevIndex = nextIndex[dest]-1,prevTerm=log[nextIndex[dest]-1][1] ,entries=log[nextIndex[dest]:],commit=commitIndex)
IndexError: list index out of range
