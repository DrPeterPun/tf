DEBUG:root:received {"dest":"n4","body":{"type":"init","node_id":"n4","node_ids":["n1","n2","n3","n4","n5"],"msg_id":1},"src":"c2","id":2}
INFO:root:node n4 initialized
DEBUG:root:sending {"dest": "c2", "src": "n4", "body": {"msg_id": 1, "in_reply_to": 1, "type": "init_ok"}}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":5,"type":"RequestVote","term":1,"prevLogIndex":0,"lastLogTerm":0,"candidateId":"n2"},"id":11}
INFO:root:node
n1
current time
1651673231286341425
node_time
1651673231286323967
dif
17458
True

INFO:root:leader alive, resuming timeout checker

INFO:root:log atual
[(('pass', None), 0)]
prevlog index
0
 last log term
0

DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 2, "in_reply_to": 5, "type": "RequestVoteRes", "term": 1, "res": true}}
INFO:root:election started and voted vor
n2
at time
1651673231288734558

DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":10,"type":"AppendEntries","term":1,"prevIndex":0,"prevTerm":0,"entries":[],"commit":0},"id":20}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 3, "in_reply_to": 10, "type": "AppendEntriesRes", "res": true, "term": 1, "next": 1, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n1","body":{"msg_id":4,"type":"AppendEntries","term":0,"prevIndex":0,"prevTerm":0,"entries":[],"commit":0},"id":29}
DEBUG:root:sending {"dest": "n1", "src": "n4", "body": {"msg_id": 4, "in_reply_to": 4, "type": "AppendEntriesRes", "res": false, "term": 1}}
INFO:root:msg term
0
current term
1
log
[(('pass', None), 0)]
msg entries
[]

DEBUG:root:received {"dest":"n4","src":"n1","body":{"msg_id":9,"type":"AppendEntries","term":1,"prevIndex":-1,"prevTerm":0,"entries":[[["pass",null],0]],"commit":0},"id":37}
INFO:root:commiting command
[['pass', None], 0]

DEBUG:root:sending {"dest": "n1", "src": "n4", "body": {"msg_id": 5, "in_reply_to": 9, "type": "AppendEntriesRes", "res": true, "term": 1, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":16,"type":"AppendEntries","term":1,"prevIndex":0,"prevTerm":0,"entries":[],"commit":0},"id":46}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 6, "in_reply_to": 16, "type": "AppendEntriesRes", "res": true, "term": 1, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":20,"type":"AppendEntries","term":1,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":58}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 7, "in_reply_to": 20, "type": "AppendEntriesRes", "res": true, "term": 1, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":12,"type":"RequestVote","term":2,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n3"},"id":65}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 8, "in_reply_to": 12, "type": "RequestVoteRes", "term": 1, "res": false}}
DEBUG:root:received {"dest":"n4","src":"n5","body":{"msg_id":11,"type":"RequestVote","term":2,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n5"},"id":72}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n5", "src": "n4", "body": {"msg_id": 9, "in_reply_to": 11, "type": "RequestVoteRes", "term": 1, "res": false}}
INFO:root:election timeout, starting new election

INFO:root:starting new elections, new term
2
sec, min max hb
0.4340889884731366
0.3333333333333333
0.5

INFO:root:Requesting new Vote

DEBUG:root:sending {"dest": "n1", "src": "n4", "body": {"msg_id": 10, "type": "RequestVote", "term": 2, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 11, "type": "RequestVote", "term": 2, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 12, "type": "RequestVote", "term": 2, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:sending {"dest": "n4", "src": "n4", "body": {"msg_id": 13, "type": "RequestVote", "term": 2, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:sending {"dest": "n5", "src": "n4", "body": {"msg_id": 14, "type": "RequestVote", "term": 2, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:received {"dest":"n4","src":"n1","body":{"msg_id":16,"in_reply_to":10,"type":"RequestVoteRes","term":1,"res":false},"id":81}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
2
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
0
None
timeout dict
{'n1': 1651673231551086806, 'n2': 1651673231503447126, 'n3': 1651673231532824117, 'n4': 1651673231286323967, 'n5': 1651673231541775005}
curr time
1651673231551320702

INFO:root:resposta
False
majority
3

DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":24,"in_reply_to":11,"type":"RequestVoteRes","term":2,"res":false},"id":82}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
2
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
0
None
timeout dict
{'n1': 1651673231551086806, 'n2': 1651673231554717631, 'n3': 1651673231532824117, 'n4': 1651673231286323967, 'n5': 1651673231541775005}
curr time
1651673231554923866

INFO:root:resposta
False
majority
3

DEBUG:root:received {"dest":"n4","src":"n4","body":{"msg_id":13,"type":"RequestVote","term":2,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n4"},"id":85}
INFO:root:voting for myself
n4
at time
1651673231562903056
nr votes
0

DEBUG:root:sending {"dest": "n4", "src": "n4", "body": {"msg_id": 15, "in_reply_to": 13, "type": "RequestVoteRes", "term": 2, "res": true}}
DEBUG:root:received {"dest":"n4","src":"n5","body":{"msg_id":15,"in_reply_to":14,"type":"RequestVoteRes","term":2,"res":false},"id":88}
DEBUG:root:received {"dest":"n4","src":"n4","body":{"msg_id":15,"in_reply_to":13,"type":"RequestVoteRes","term":2,"res":true},"id":89}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":16,"in_reply_to":12,"type":"RequestVoteRes","term":2,"res":false},"id":91}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
2
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
0
n4
timeout dict
{'n1': 1651673231551086806, 'n2': 1651673231554717631, 'n3': 1651673231532824117, 'n4': 1651673231562889159, 'n5': 1651673231571635663}
curr time
1651673231571827091

INFO:root:resposta
False
majority
3

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
2
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
0
n4
timeout dict
{'n1': 1651673231551086806, 'n2': 1651673231554717631, 'n3': 1651673231532824117, 'n4': 1651673231572300161, 'n5': 1651673231571635663}
curr time
1651673231572444050

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
0

INFO:root:depois  #489
1

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
2
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n4
timeout dict
{'n1': 1651673231551086806, 'n2': 1651673231554717631, 'n3': 1651673231573199568, 'n4': 1651673231572300161, 'n5': 1651673231571635663}
curr time
1651673231573358558

INFO:root:resposta
False
majority
3

DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":27,"type":"AppendEntries","term":2,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":96}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 16, "in_reply_to": 27, "type": "AppendEntriesRes", "res": true, "term": 2, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":32,"type":"AppendEntries","term":2,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":104}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 17, "in_reply_to": 32, "type": "AppendEntriesRes", "res": true, "term": 2, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":36,"type":"AppendEntries","term":2,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":112}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 18, "in_reply_to": 36, "type": "AppendEntriesRes", "res": true, "term": 2, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":23,"type":"RequestVote","term":3,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n3"},"id":122}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 19, "in_reply_to": 23, "type": "RequestVoteRes", "term": 2, "res": false}}
DEBUG:root:received {"dest":"n4","src":"n5","body":{"msg_id":22,"type":"RequestVote","term":3,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n5"},"id":130}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":41,"type":"RequestVote","term":3,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n2"},"id":131}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n5", "src": "n4", "body": {"msg_id": 20, "in_reply_to": 22, "type": "RequestVoteRes", "term": 2, "res": false}}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0]]
prevlog index
1
 last log term
0

DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 21, "in_reply_to": 41, "type": "RequestVoteRes", "term": 2, "res": false}}
INFO:root:election timeout, starting new election

INFO:root:starting new elections, new term
3
sec, min max hb
0.38609328715827657
0.3333333333333333
0.5

INFO:root:Requesting new Vote

DEBUG:root:sending {"dest": "n1", "src": "n4", "body": {"msg_id": 22, "type": "RequestVote", "term": 3, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 23, "type": "RequestVote", "term": 3, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 24, "type": "RequestVote", "term": 3, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:sending {"dest": "n4", "src": "n4", "body": {"msg_id": 25, "type": "RequestVote", "term": 3, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:sending {"dest": "n5", "src": "n4", "body": {"msg_id": 26, "type": "RequestVote", "term": 3, "prevLogIndex": 1, "lastLogTerm": 0, "candidateId": "n4"}}
DEBUG:root:received {"dest":"n4","src":"n4","body":{"msg_id":25,"type":"RequestVote","term":3,"prevLogIndex":1,"lastLogTerm":0,"candidateId":"n4"},"id":148}
INFO:root:voting for myself
n4
at time
1651673231826257081
nr votes
0

DEBUG:root:sending {"dest": "n4", "src": "n4", "body": {"msg_id": 27, "in_reply_to": 25, "type": "RequestVoteRes", "term": 3, "res": true}}
DEBUG:root:received {"dest":"n4","src":"n4","body":{"msg_id":27,"in_reply_to":25,"type":"RequestVoteRes","term":3,"res":true},"id":150}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
3
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
0
n4
timeout dict
{'n1': 1651673231551086806, 'n2': 1651673231799943486, 'n3': 1651673231790478045, 'n4': 1651673231829370227, 'n5': 1651673231798823450}
curr time
1651673231829613637

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
0

INFO:root:depois  #489
1

DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":46,"in_reply_to":23,"type":"RequestVoteRes","term":3,"res":false},"id":152}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
3
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n4
timeout dict
{'n1': 1651673231551086806, 'n2': 1651673231834374683, 'n3': 1651673231790478045, 'n4': 1651673231829370227, 'n5': 1651673231798823450}
curr time
1651673231834693451

INFO:root:resposta
False
majority
3

DEBUG:root:received {"dest":"n4","src":"n1","body":{"msg_id":23,"in_reply_to":22,"type":"RequestVoteRes","term":3,"res":false},"id":154}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":30,"type":"AppendEntries","term":3,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":156}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
3
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n4
timeout dict
{'n1': 1651673231838722294, 'n2': 1651673231834374683, 'n3': 1651673231790478045, 'n4': 1651673231829370227, 'n5': 1651673231798823450}
curr time
1651673231839019788

INFO:root:resposta
False
majority
3

DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 28, "in_reply_to": 30, "type": "AppendEntriesRes", "res": true, "term": 3, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n5","body":{"msg_id":27,"in_reply_to":26,"type":"RequestVoteRes","term":3,"res":false},"id":160}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":32,"in_reply_to":24,"type":"RequestVoteRes","term":3,"res":true},"id":161}
INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
3
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n4
timeout dict
{'n1': 1651673231838722294, 'n2': 1651673231834374683, 'n3': 1651673231839559958, 'n4': 1651673231829370227, 'n5': 1651673231842508807}
curr time
1651673231842702768

INFO:root:resposta
False
majority
3

INFO:root:Got a response to the vote Request #475

INFO:root:node id:
n4
leader
n1
kvsotr
{}
cur term
3
log 
[(('pass', None), 0), [['pass', None], 0]]
commit indez e last applied
0
0
candidate, votes, voted for
True
1
n4
timeout dict
{'n1': 1651673231838722294, 'n2': 1651673231834374683, 'n3': 1651673231843178944, 'n4': 1651673231829370227, 'n5': 1651673231842508807}
curr time
1651673231843328145

INFO:root:resposta
True
majority
3

INFO:root:antes  #487
1

INFO:root:depois  #489
2

DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":50,"type":"AppendEntries","term":3,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":167}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 29, "in_reply_to": 50, "type": "AppendEntriesRes", "res": true, "term": 3, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":36,"type":"AppendEntries","term":3,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":175}
DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 30, "in_reply_to": 36, "type": "AppendEntriesRes", "res": true, "term": 3, "next": 2, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":55,"type":"AppendEntries","term":3,"entries":[[["cas",[0,[1,3]]],3]],"prevIndex":1,"prevTerm":0,"commit":0},"id":183}
INFO:root:commiting command
[['cas', [0, [1, 3]]], 3]

DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 31, "in_reply_to": 55, "type": "AppendEntriesRes", "res": true, "term": 3, "next": 3, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":59,"type":"AppendEntries","term":3,"prevIndex":2,"prevTerm":3,"entries":[],"commit":0},"id":190}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 32, "in_reply_to": 59, "type": "AppendEntriesRes", "res": true, "term": 3, "next": 3, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":42,"type":"AppendEntries","term":3,"prevIndex":1,"prevTerm":0,"entries":[],"commit":0},"id":197}
DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 33, "in_reply_to": 42, "type": "AppendEntriesRes", "res": true, "term": 3, "next": 3, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":47,"type":"RequestVote","term":4,"prevLogIndex":2,"lastLogTerm":3,"candidateId":"n3"},"id":205}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3]]
prevlog index
2
 last log term
3

DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 34, "in_reply_to": 47, "type": "RequestVoteRes", "term": 3, "res": false}}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":64,"type":"AppendEntries","term":3,"prevIndex":2,"prevTerm":3,"entries":[],"commit":0},"id":210}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":69,"type":"RequestVote","term":4,"prevLogIndex":2,"lastLogTerm":3,"candidateId":"n2"},"id":215}
DEBUG:root:received {"dest":"n4","src":"n5","body":{"msg_id":38,"type":"RequestVote","term":4,"prevLogIndex":2,"lastLogTerm":3,"candidateId":"n5"},"id":223}
DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 35, "in_reply_to": 64, "type": "AppendEntriesRes", "res": true, "term": 3, "next": 3, "commit": 0}}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3]]
prevlog index
2
 last log term
3

DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 36, "in_reply_to": 69, "type": "RequestVoteRes", "term": 3, "res": false}}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3]]
prevlog index
2
 last log term
3

DEBUG:root:sending {"dest": "n5", "src": "n4", "body": {"msg_id": 37, "in_reply_to": 38, "type": "RequestVoteRes", "term": 3, "res": false}}
DEBUG:root:received {"dest":"n4","src":"n2","body":{"msg_id":74,"type":"RequestVote","term":5,"prevLogIndex":2,"lastLogTerm":3,"candidateId":"n2"},"id":231}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3]]
prevlog index
2
 last log term
3

DEBUG:root:sending {"dest": "n2", "src": "n4", "body": {"msg_id": 38, "in_reply_to": 74, "type": "RequestVoteRes", "term": 3, "res": false}}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":55,"type":"AppendEntries","term":4,"entries":[[["write",[1,4]],4]],"prevIndex":2,"prevTerm":3,"commit":0},"id":240}
INFO:root:vote ended, new leader is
n1

INFO:root:there is a new leader

INFO:root:node id:
n4
leader
n3
kvsotr
{}
cur term
3
log 
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3]]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651673231838722294, 'n2': 1651673232071527711, 'n3': 1651673232078046357, 'n4': 1651673231829370227, 'n5': 1651673232065609750}
curr time
1651673232078424795

INFO:root:commiting command
[['write', [1, 4]], 4]

DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 39, "in_reply_to": 55, "type": "AppendEntriesRes", "res": true, "term": 4, "next": 4, "commit": 0}}
INFO:root:election ended

DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":61,"type":"RequestVote","term":5,"prevLogIndex":3,"lastLogTerm":4,"candidateId":"n3"},"id":258}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3], [['write', [1, 4]], 4]]
prevlog index
3
 last log term
4

DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 40, "in_reply_to": 61, "type": "RequestVoteRes", "term": 5, "res": true}}
INFO:root:election started and voted vor
n3
at time
1651673232094141815

DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":68,"type":"AppendEntries","term":5,"prevIndex":3,"prevTerm":4,"entries":[],"commit":0},"id":269}
DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 41, "in_reply_to": 68, "type": "AppendEntriesRes", "res": true, "term": 5, "next": 4, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":72,"type":"AppendEntries","term":5,"prevIndex":3,"prevTerm":4,"entries":[],"commit":0},"id":275}
DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 42, "in_reply_to": 72, "type": "AppendEntriesRes", "res": true, "term": 5, "next": 4, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":77,"type":"RequestVote","term":6,"prevLogIndex":4,"lastLogTerm":3,"candidateId":"n3"},"id":282}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":81,"type":"AppendEntries","term":6,"prevIndex":3,"prevTerm":4,"entries":[],"commit":0},"id":287}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3], [['write', [1, 4]], 4]]
prevlog index
4
 last log term
3

DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 43, "in_reply_to": 77, "type": "RequestVoteRes", "term": 5, "res": false}}
INFO:root:vote ended, new leader is
n3

INFO:root:there is a new leader

INFO:root:node id:
n4
leader
n3
kvsotr
{}
cur term
5
log 
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3], [['write', [1, 4]], 4]]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651673231838722294, 'n2': 1651673232071527711, 'n3': 1651673232310714832, 'n4': 1651673231829370227, 'n5': 1651673232065609750}
curr time
1651673232311047591

DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 44, "in_reply_to": 81, "type": "AppendEntriesRes", "res": true, "term": 6, "next": 4, "commit": 0}}
DEBUG:root:received {"dest":"n4","src":"n5","body":{"msg_id":54,"type":"RequestVote","term":7,"prevLogIndex":4,"lastLogTerm":3,"candidateId":"n5"},"id":296}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3], [['write', [1, 4]], 4]]
prevlog index
4
 last log term
3

DEBUG:root:sending {"dest": "n5", "src": "n4", "body": {"msg_id": 45, "in_reply_to": 54, "type": "RequestVoteRes", "term": 6, "res": false}}
DEBUG:root:received {"dest":"n4","src":"n5","body":{"msg_id":59,"type":"RequestVote","term":8,"prevLogIndex":4,"lastLogTerm":3,"candidateId":"n5"},"id":301}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3], [['write', [1, 4]], 4]]
prevlog index
4
 last log term
3

DEBUG:root:sending {"dest": "n5", "src": "n4", "body": {"msg_id": 46, "in_reply_to": 59, "type": "RequestVoteRes", "term": 6, "res": false}}
INFO:root:election ended

DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":89,"type":"RequestVote","term":7,"prevLogIndex":4,"lastLogTerm":3,"candidateId":"n3"},"id":312}
INFO:root:log atual
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3], [['write', [1, 4]], 4]]
prevlog index
4
 last log term
3

DEBUG:root:sending {"dest": "n3", "src": "n4", "body": {"msg_id": 47, "in_reply_to": 89, "type": "RequestVoteRes", "term": 6, "res": false}}
DEBUG:root:received {"dest":"n4","src":"n3","body":{"msg_id":94,"type":"AppendEntries","term":7,"entries":[[["cas",[0,[1,3]]],3],[["cas",[0,[2,4]]],7]],"prevIndex":3,"prevTerm":4,"commit":0},"id":320}
INFO:root:vote ended, new leader is
n3

INFO:root:there is a new leader

INFO:root:node id:
n4
leader
n3
kvsotr
{}
cur term
6
log 
[(('pass', None), 0), [['pass', None], 0], [['cas', [0, [1, 3]]], 3], [['write', [1, 4]], 4]]
commit indez e last applied
0
0
candidate, votes, voted for
False
None
None
timeout dict
{'n1': 1651673231838722294, 'n2': 1651673232071527711, 'n3': 1651673232388269698, 'n4': 1651673231829370227, 'n5': 1651673232329286368}
curr time
1651673232388637399

ERROR:root:fatal exception in handler
Traceback (most recent call last):
  File "/home/peter/Documents/tf/lab3/ms.py", line 27, in exitOnError
    fn(*args)
  File "/home/peter/Documents/tf/lab3/raft.py", line 354, in handle
    buildString([ "355", log,msg.body.entries ,msg.body.prevIndex ,commitIndex ,node_id, log[msg.body.prevIndex+i], msg.body.entries[i-1] ,i ])
IndexError: list index out of range
